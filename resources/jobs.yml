resources:
  jobs:
    finalProject_pipeline:
      name: "Final Project Pipeline - ${bundle.target}"

      trigger:
        periodic:
          interval: 24
          unit: HOURS

      tasks:
        - task_key: run_python_task
          spark_python_task:
            python_file: ../src/main.py
          environment_key: ${bundle.target}

        - task_key: data_ingestion
          notebook_task:
            notebook_path: ../notebooks/01-download-dataset-kaggle.ipynb
            source: WORKSPACE
          environment_key: ${bundle.target}

      queue:
        enabled: true

      environments:
        - environment_key: dev
          spec:
            environment_version: "4"
            dependencies:
              - cowsay

        - environment_key: prod
          spec:
            environment_version: "4"
            dependencies:
              - cowsay
              # Add prod-grade dependencies here

      performance_target: PERFORMANCE_OPTIMIZED
